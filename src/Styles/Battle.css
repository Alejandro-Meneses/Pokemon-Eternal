/* ESTILOS ESPECÍFICOS DEL COMPONENTE BATTLE */
@import url('../Styles/Variables.css');

/* Contenedor principal */
.battle-container {
    width: 90%;
    /* Ocupa el 90% del ancho de la pantalla */
    max-width: 80vw;
    /* Máximo ancho relativo al viewport */
    height: 70vh;
    /* Altura relativa al viewport */
    margin: 0 auto;
    /* Centrado horizontal */
    background: linear-gradient(to top, var(--primary-color), rgba(100, 120, 200, 0.7), var(--secondary-color));
    border: 0.3vw solid #333;
    /* Borde responsivo */
    border-radius: 1vw;
    /* Bordes redondeados responsivos */
    position: relative;
    overflow: hidden;
}

/* Sección del Pokémon rival */
.battle-container .rival-section {
    position: absolute;
    top: 8vh;
    /* Más centrado verticalmente */
    right: 3vw;
    /* Más cerca del borde derecho */
    text-align: right;
}

.battle-container .rival-sprite {
    height: 20vh;
    /* Altura relativa al viewport */
    width: auto;
    /* Mantiene la proporción */
    margin-left: -1vw;
    /* Espacio entre la imagen y la barra */
}

.battle-container .rival-info {
    position: absolute;
    top: 0;
    right: 65%;
    /* Movido más a la derecha (era 110%) */
    border-radius: 0.5vw;
    /* Bordes redondeados responsivos */
    padding: 1vh;
    /* Más espacio interno */
    text-align: left;
    width: 15vw;
    /* Ancho responsivo */
}

/* Sección del Pokémon del jugador */
.battle-container .player-section {
    position: absolute;
    bottom: 14vh;
    /* Movido más arriba */
    left: 1vw;
    /* Movido más a la izquierda */
    text-align: left;
}

.battle-container .player-sprite {
    height: 20vh;
    /* Altura relativa al viewport */
    width: auto;
    /* Mantiene la proporción */
    margin-right: 1vw;
    /* Espacio entre la imagen y la barra */
    margin-top: 1vh;
    /* Espacio entre la imagen y la barra */
}

/* Información del Pokémon del jugador */
.battle-container .player-info {
    position: absolute;
    bottom: 20%;
    /* Mueve el nombre más arriba */
    left: 75%;
    /* Ajustado para compensar que el sprite está más a la izquierda */
    border-radius: 0.5vw;
    /* Bordes redondeados responsivos */
    padding: 1vh;
    /* Más espacio interno */
    text-align: left;
    width: 15vw;
    /* Ancho responsivo */
}

/* Barra de vida del jugador */
.battle-container .player-hp-bar-container {
    display: flex;
    /* Alinea la imagen y la barra en línea */
    align-items: center;
    /* Centra verticalmente los elementos */
    justify-content: flex-start;
    /* Alinea los elementos al inicio (izquierda) */
    background-color: transparent;
    /* Sin fondo */
    height: 2vh;
    /* Altura de la barra */
    width: 80%;
    /* Ancho total del contenedor */
    margin-top: 0.5vh;
}

.battle-container .player-hp-bar-container .hp-icon {
    height: 4vh;
    /* Tamaño del ícono igual a la altura de la barra */
    width: auto;
    /* Mantiene la proporción */
    margin-right: -0.5vw;
    /* Espacio entre la imagen y la barra */
    flex-shrink: 0;
    /* Evita que el ícono se reduzca */
    z-index: 1;
    filter: drop-shadow(0.1vw 0.1vw 0.3vw rgba(0, 0, 0, 0.5));
    /* Sombra negra suave */
}

/* Barra de vida del rival */
.battle-container .rival-hp-bar-container {
    display: flex;
    /* Alinea la imagen y la barra en línea */
    align-items: center;
    /* Centra verticalmente los elementos */
    justify-content: flex-end;
    /* Alinea los elementos al final (derecha) */
    background-color: transparent;
    /* Sin fondo */
    height: 2vh;
    /* Altura de la barra */
    width: 80%;
    /* Ancho total del contenedor */
    margin-top: 0.5vh;
}

.battle-container .rival-hp-bar-container .hp-icon {
    height: 4vh;
    /* Tamaño del ícono igual a la altura de la barra */
    width: auto;
    /* Mantiene la proporción */
    margin-left: -0.5vw;
    /* Espacio entre la barra y la imagen */
    flex-shrink: 0;
    /* Evita que el ícono se reduzca */
    filter: drop-shadow(0.1vw 0.1vw 0.3vw rgba(0, 0, 0, 0.5));
    /* Sombra negra suave */
}

/* NUEVO: Fondo de la barra de vida */
.battle-container .hp-bar-background {
    width: 100%;
    height: 100%;
    background-color: #e0e0e0;
    border-radius: 0.5vw;
    overflow: hidden;
    position: relative;
    flex-grow: 1;
}

/* Barra de vida MODIFICADA */
.battle-container .hp-bar {
    background-color: #4caf50;
    /* Color verde de la barra */
    height: 100%;
    /* Ocupa toda la altura del contenedor */
    border-radius: 0.5vw;
    /* Bordes redondeados */
    position: absolute;
    top: 0;
    left: 0;
    transition: width 0.8s ease, background-color 0.8s ease;
    /* Animación al cambiar el ancho y color */
    box-shadow: 0.1vw 0.1vw 0.5vw rgba(0, 0, 0, 0.8);
    /* Sombra negra suave */
}

/* Nombre del Pokémon */
.battle-container .pokemon-name {
    font-weight: bold;
    font-size: 2.2vh;
    /* Tamaño de fuente más grande */
    margin: 0;
    margin-bottom: 1.2vh;
    /* Espacio debajo del nombre */
    margin-left: 3vh;
    text-transform: uppercase;
    /* Todo en mayúsculas */
    text-shadow: 0.1vw 0.1vw 0.3vw rgba(0, 0, 0, 0.5);
    /* Sombra negra suave */
}

/* Contenedor de los botones de acción */
.battle-container .action-buttons {
    position: absolute;
    bottom: 2vh;
    /* Posicionado en la parte inferior */
    right: 2vw;
    /* Posicionado en la parte derecha */
    width: 15vw;
    /* Aumentamos el ancho para botones más grandes */
    z-index: 2;
    pointer-events: auto;
    /* Permite la interacción con los botones */
}

/* Estilos generales para todos los botones de acción */
.battle-container .action-buttons .btn {
    font-size: 14px !important;
    /* Aumentamos el tamaño de fuente */
    font-weight: bold !important;
    padding: 8px 6px !important;
    /* Mayor padding para botones más grandes */
    white-space: nowrap;
    /* Evita que el texto se rompa en múltiples líneas */
    overflow: hidden;
    /* Oculta el texto que excede el botón */
    text-overflow: ellipsis;
    /* Muestra puntos suspensivos si el texto es demasiado largo */
    position: relative;
    /* Para el tooltip */
}

/* Estilos base para todos los botones de movimientos */
.battle-container .action-buttons .btn-move {
    color: white;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    transition: all 0.2s ease;
    border-width: 3px;
    border-style: solid;
    box-shadow: 0 3px 5px rgba(0, 0, 0, 0.2);
}

.battle-container .action-buttons .btn-move:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 8px rgba(0, 0, 0, 0.3);
}

.battle-container .action-buttons .btn-move:active {
    transform: translateY(1px);
    box-shadow: 0 2px 3px rgba(0, 0, 0, 0.2);
}

/* Estilos específicos por tipo de Pokémon */
.battle-container .action-buttons .btn-normal {
    background-color: var(--type-normal-bg);
    border-color: var(--type-normal-border);
}

.battle-container .action-buttons .btn-fighting {
    background-color: var(--type-fighting-bg);
    border-color: var(--type-fighting-border);
}

.battle-container .action-buttons .btn-flying {
    background-color: var(--type-flying-bg);
    border-color: var(--type-flying-border);
}

.battle-container .action-buttons .btn-poison {
    background-color: var(--type-poison-bg);
    border-color: var(--type-poison-border);
}

.battle-container .action-buttons .btn-ground {
    background-color: var(--type-ground-bg);
    border-color: var(--type-ground-border);
}

.battle-container .action-buttons .btn-rock {
    background-color: var(--type-rock-bg);
    border-color: var(--type-rock-border);
}

.battle-container .action-buttons .btn-bug {
    background-color: var(--type-bug-bg);
    border-color: var(--type-bug-border);
}

.battle-container .action-buttons .btn-ghost {
    background-color: var(--type-ghost-bg);
    border-color: var(--type-ghost-border);
}

.battle-container .action-buttons .btn-steel {
    background-color: var(--type-steel-bg);
    border-color: var(--type-steel-border);
}

.battle-container .action-buttons .btn-fire {
    background-color: var(--type-fire-bg);
    border-color: var(--type-fire-border);
}

.battle-container .action-buttons .btn-water {
    background-color: var(--type-water-bg);
    border-color: var(--type-water-border);
}

.battle-container .action-buttons .btn-grass {
    background-color: var(--type-grass-bg);
    border-color: var(--type-grass-border);
}

.battle-container .action-buttons .btn-electric {
    background-color: var(--type-electric-bg);
    border-color: var(--type-electric-border);
    color: #333;
}

.battle-container .action-buttons .btn-psychic {
    background-color: var(--type-psychic-bg);
    border-color: var(--type-psychic-border);
}

.battle-container .action-buttons .btn-ice {
    background-color: var(--type-ice-bg);
    border-color: var(--type-ice-border);
    color: #333;
}

.battle-container .action-buttons .btn-dragon {
    background-color: var(--type-dragon-bg);
    border-color: var(--type-dragon-border);
}

.battle-container .action-buttons .btn-dark {
    background-color: var(--type-dark-bg);
    border-color: var(--type-dark-border);
}

.battle-container .action-buttons .btn-fairy {
    background-color: var(--type-fairy-bg);
    border-color: var(--type-fairy-border);
}

/* Estilo para el botón de volver */
.battle-container .action-buttons .btn-back {
    background-color: var(--action-back-color, #71717A);
    border-color: #52525B;
    color: white;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    transition: all 0.2s ease;
    border-width: 3px;
    border-style: solid;
    box-shadow: 0 3px 5px rgba(0, 0, 0, 0.2);
}

.battle-container .action-buttons .btn-back:hover {
    background-color: var(--action-back-color-hover, #52525B);
    transform: translateY(-2px);
    box-shadow: 0 5px 8px rgba(0, 0, 0, 0.3);
}

.battle-container .action-buttons .btn-back:active {
    transform: translateY(1px);
    box-shadow: 0 2px 3px rgba(0, 0, 0, 0.2);
}

/* Log de batalla responsivo */
.battle-container .battle-log {
    bottom: 1.5vh;
    /* Posición vertical relativa a la altura de la pantalla */
    left: auto;
    /* Posición horizontal relativa al ancho de la pantalla */
    width: 22vw;
    /* Ancho relativo al ancho de la pantalla */
    height: 10vh;
    /* Altura relativa a la altura de la pantalla */
    max-height: 150px;
    /* Altura máxima para pantallas grandes */
    overflow-y: auto;
    /* Scroll vertical cuando sea necesario */
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 1vh;
    /* Padding relativo a la altura */
    font-size: clamp(10px, 1.2vh, 14px);
    /* Tamaño de fuente adaptativo */
    z-index: 5;
    opacity: 0.9;
    box-shadow: 0 0.2vh 0.5vw rgba(0, 0, 0, 0.5);
    /* Sombra responsiva */
    position: relative;
    bottom: auto;
    border-radius: 0 0 0.5vw 0.5vw;
    margin-top: -0.5vh;
    /* Ajusta para que parezca conectado */
}

/* Opcional: Estilo para las entradas del log */
.battle-container .battle-log .log-entry {
    margin-bottom: 0.5vh;
    line-height: 1.3;
    text-shadow: 0.05vw 0.05vw 0.1vw rgba(0, 0, 0, 0.7);
}

/* Opcional: Estilo para la barra de desplazamiento */
.battle-container .battle-log::-webkit-scrollbar {
    width: 0.5vw;
    max-width: 6px;
}

.battle-container .battle-log::-webkit-scrollbar-thumb {
    background-color: rgba(255, 255, 255, 0.5);
    border-radius: 0.5vw;
}

.battle-container .battle-log::-webkit-scrollbar-track {
    background-color: rgba(0, 0, 0, 0.3);
}

/* Grupo para contener el mensaje y el log juntos */
.battle-container .battle-info-group {
    position: absolute;
    bottom: 1.5vh;
    left: 1vw;
    width: 22vw;
    display: flex;
    flex-direction: column;
    gap: 0.5vh;
    z-index: 5;
}

/* Ajustes al mensaje de batalla para que se alinee con el log */
.battle-container .battle-message {
    background-color: rgba(60, 90, 166, 0.85);
    /* Azul Pokemon más oscuro y semi-transparente */
    color: white;
    /* Texto blanco para mejor contraste */
    padding: 1vh;
    border-radius: 0.5vw 0.5vw 0 0;
    font-size: clamp(12px, 1.4vh, 16px);
    font-weight: bold;
    text-align: center;
    height: auto;
    min-height: 4vh;
    width: 22vw;
    box-shadow: 0 0.2vh 0.2vw rgba(0, 0, 0, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Texto de HP */
.battle-container .hp-text {
    font-size: 1.8vh;
    margin-top: 0.5vh;
    font-weight: bold;
}

/* NUEVO: SISTEMA DE BOTONES OPTIMIZADO PARA MÓVIL */
.battle-container .action-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    grid-gap: 10px;
    width: 100%;
    max-width: 500px;
    margin: 0 auto;
}

/* Botones grandes y accesibles */
.battle-container .battle-btn {
    min-height: 70px;
    font-size: 18px !important;
    font-weight: bold;
    text-transform: uppercase;
    border-radius: 10px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
    transition: all 0.2s ease;
}

.battle-container .battle-btn:active {
    transform: translateY(3px);
    box-shadow: 0 2px 3px rgba(0, 0, 0, 0.3);
}

/* Colores de los botones usando variables */
.battle-container .btn-attack {
    background-color: var(--action-attack-color, #e74c3c) !important;
    color: white;
}

.battle-container .btn-bag {
    background-color: var(--action-bag-color, #f39c12) !important;
    color: white;
}

.battle-container .btn-pokemon {
    background-color: var(--action-pokemon-color, #27ae60) !important;
    color: white;
}

.battle-container .btn-run {
    background-color: var(--action-run-color, #3498db) !important;
    color: white;
}

.battle-container .btn-back {
    background-color: var(--action-back-color, #7f8c8d) !important;
    color: white;
    grid-column: span 2;
}

/* RESPONSIVE PARA MÓVILES */
@media (max-width: var(--breakpoint-lg, 900px)) and (orientation: landscape) {
    .battle-container {
        border: none;
        border-radius: 0;
        width: 100%;
        height: 100%;
        max-width: 100%;
    }

    .battle-container .rival-section {
        position: absolute;
        top: 5px;
        right: 10px;
        width: auto;
        display: flex;
        flex-direction: column;
        align-items: flex-end;
    }

    .battle-container .rival-sprite {
        height: 70px;
        width: 70px;
        object-fit: contain;
        margin: 0;
    }

    .battle-container .rival-info {
        position: relative;
        top: auto;
        right: auto;
        background-color: rgba(0, 0, 0, 0.6);
        border-radius: 6px;
        padding: 5px;
        margin-bottom: 5px;
        width: 160px;
    }

    .battle-container .player-section {
        position: absolute;
        bottom: 80px;
        left: 10px;
        width: auto;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
    }

    .battle-container .player-sprite {
        height: 70px;
        width: 70px;
        object-fit: contain;
        margin: 0;
    }

    .battle-container .player-info {
        position: relative;
        bottom: auto;
        left: auto;
        background-color: rgba(0, 0, 0, 0.6);
        border-radius: 6px;
        padding: 5px;
        margin-top: 5px;
        width: 160px;
    }

    .battle-container .battle-info-group {
        position: absolute;
        bottom: 80px;
        left: 0;
        width: 100%;
        padding: 0;
    }

    .battle-container .battle-message {
        width: 100%;
        border-radius: 0;
        font-size: 14px;
        min-height: 30px;
        padding: 5px;
    }

    .battle-container .battle-log {
        width: 100%;
        border-radius: 0;
        max-height: 50px;
        margin: 0;
    }

    .battle-container .action-buttons {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        width: 100%;
        padding: 10px;
        background-color: rgba(0, 0, 0, 0.8);
        z-index: 100;
    }

    .battle-container .battle-btn {
        min-height: 55px;
    }
}

/* Para dispositivos muy pequeños */
@media (max-height: var(--breakpoint-sm, 400px)) and (orientation: landscape) {

    .battle-container .rival-sprite,
    .battle-container .player-sprite {
        height: 60px;
        width: 60px;
    }

    .battle-container .rival-info,
    .battle-container .player-info {
        width: 140px;
        padding: 3px;
    }

    .battle-container .player-section {
        bottom: 70px;
    }

    .battle-container .battle-info-group {
        bottom: 70px;
    }

    .battle-container .battle-message {
        min-height: 22px;
        font-size: 12px;
        padding: 4px;
    }

    .battle-container .battle-log {
        max-height: 35px;
        font-size: 10px;
        padding: 4px;
    }

    .battle-container .battle-btn {
        min-height: 45px;
        font-size: 14px !important;
    }
}

/* Estilos para el selector de Pokémon */
.pokemon-selector-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    z-index: 1000;
    display: flex;
    justify-content: center;
    align-items: center;
    pointer-events: auto;
}

.pokemon-selector-modal {
    background-color: #1a2541;
    border: 2px solid #3c5aa6;
    border-radius: 10px;
    padding: 20px;
    width: 90%;
    max-width: 600px;
    color: white;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
    pointer-events: auto;

}

.pokemon-selector-modal h3 {
    text-align: center;
    margin-bottom: 15px;
    color: #ffcb05;
}

.pokemon-team-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin-bottom: 20px;
    pointer-events: auto;

}

.pokemon-team-item {
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    padding: 10px;
    text-align: center;
    cursor: pointer;
    transition: transform 0.2s, background-color 0.2s;
    pointer-events: auto;
    position: relative
}

.pokemon-team-item:hover {
    background-color: rgba(255, 255, 255, 0.2);
    transform: translateY(-3px);
}

.pokemon-team-sprite {
    width: 70px;
    height: 70px;
    margin: 0 auto;
    display: block;
}

.pokemon-team-name {
    font-size: 0.9rem;
    margin: 5px 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    pointer-events: auto;

}

.pokemon-team-hp-bar {
    height: 6px;
    background-color: rgba(255, 255, 255, 0.3);
    border-radius: 3px;
    overflow: hidden;
    margin-top: 5px;
}

.pokemon-team-hp-fill {
    height: 100%;
}

.pokemon-selector-close {
    display: block;
    margin: 0 auto;
    padding: 8px 20px;
    pointer-events: auto;
    cursor: pointer;
}

@media (max-width: 576px) {
    .pokemon-team-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .pokemon-selector-modal {
        padding: 15px;
    }
}